<macros>
    <xml name="verify_hub_structure" token_genome="Dbia3" token_test="common">
        <!--genomes.txt -->
        <extra_files type="file" name="myHub/genomes.txt" value="@TEST@/myHub/genomes.txt" />

        <extra_files type="file" name="myHub/@GENOME@.html" value="@TEST@/myHub/@GENOME@.html"/>
        <!-- hub.txt -->
        <extra_files type="file" name="myHub/hub.txt" value="@TEST@/myHub/hub.txt" lines_diff="2">
            <assert_contents>
                <has_text text="email"/>
            </assert_contents>
        </extra_files>
        <!-- 2bit file -->
        <extra_files type="file" name="myHub/@GENOME@/@GENOME@.2bit" value="common/@GENOME@.2bit" />
        <!-- groups.txt -->
        <extra_files type="file" name="myHub/@GENOME@/groups.txt" value="@TEST@/myHub/@GENOME@/groups.txt" />
        <!-- description.html -->
        <extra_files type="file" name="myHub/@GENOME@/description.html" value="@TEST@/myHub/@GENOME@/description.html"/>
        <!-- trackDb.txt -->
        <extra_files type="file" name="myHub/@GENOME@/trackDb.txt">
            <assert_contents>
                <has_text text="track"/>
                <has_text text="longLabel"/>
                <has_text text="shortLabel"/>
                <has_text text="bigDataUrl"/>
                <has_text text="type"/>
                <has_text text="visibility"/>
                <has_text text="thickDrawItem"/>
                <has_text text="priority"/>
                <has_text text="color"/>
                <has_text text="group"/>
            </assert_contents>
        </extra_files>
    </xml>

    <xml name="verify_hub_structure_no_track" token_genome="Dbia3" token_test="common">
        <!--genomes.txt -->
        <extra_files type="file" name="myHub/genomes.txt" value="@TEST@/myHub/genomes.txt" />

        <extra_files type="file" name="myHub/@GENOME@.html" value="@TEST@/myHub/@GENOME@.html"/>
        <!-- hub.txt -->
        <extra_files type="file" name="myHub/hub.txt" value="@TEST@/myHub/hub.txt" lines_diff="2">
            <assert_contents>
                <has_text text="email"/>
            </assert_contents>
        </extra_files>
        <!-- 2bit file -->
        <extra_files type="file" name="myHub/@GENOME@/@GENOME@.2bit" value="common/@GENOME@.2bit" />
        <!-- description.html -->
        <extra_files type="file" name="myHub/@GENOME@/description.html" value="@TEST@/myHub/@GENOME@/description.html"/>
    </xml>

    <xml name="add_trix_file">
        <conditional name="add_trix_index">
            <param name="add_trix_index_selector" type="select" label="Add Trix index that allow for fast look-up of free text associated with a list of identifiers." help="More about Trix index: https://genome.ucsc.edu/goldenpath/help/trix.html">
                <option value="no" selected="true">No</option>
                <option value="yes">Yes</option>
            </param>

            <when value="yes">
                <param 
                    name="trix_id" 
                    value="name" 
                    type="text"
                    size="30"
                    label="Specify Trix identifier"
                />
                <conditional name="index_files">
                    <param name="index_files_type" type="select" label="Single files or an index collection" help="Select between provide individual Trix files (.ix and .ixx) or an Trix index collection">
                        <option value="collection">Index collection</option>
                        <option value="single">Single files</option>
                    </param>
                    <when value="collection">
                        <param 
                            name="trix_index" 
                            format="txt" 
                            type="data_collection" 
                            collection_type="list" 
                            label="Select dataset collection" 
                            help="Specify dataset collection containing ix and ixx files"
                        />
                    </when>
                    <when value="single">
                        <param
                            format="txt"
                            name="index_ix"
                            type="data"
                            label="Trix index file (.ix)"
                        />
                        <param
                            format="txt"
                            name="index_ixx"
                            type="data"
                            label="Trix index file (.ixx)"
                        />
                    </when>
                </conditional>
            </when>
            <when value="no">
            </when>
        </conditional>
    </xml>

</macros>